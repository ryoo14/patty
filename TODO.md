# Patty - 残課題リスト

## ✅ 完了済み (2025-06-22)

- ✅ `create`コマンドのシェルインジェクション脆弱性修正
- ✅ `get`コマンドのシェルインジェクション + パストラバーサル脆弱性修正
- ✅ `create`コマンドの非同期処理未処理問題修正
- ✅ `ensureDir`の例外未処理問題修正

## 🔴 残課題

### 🟡 中優先度（エラーハンドリング）

**4. 不適切なプロセス終了の修正**

- ファイル: `main.ts`
- 行: 55, 94, 147, 153
- 問題: `Deno.exit(1)` でプロセス強制終了
- 修正: 適切な例外(`throw new Error()`)に変更
- 影響: CLIとしてはDeno.exitは適切だが、テスタビリティとエラーハンドリングの観点で改善余地あり

### 🟠 低優先度（コード品質）

**5. 未実装TODO**

- ファイル: `main.ts`
- 行: 148 `// TODO: function`
- 問題: URL解析ロジックの関数化が未完了
- 修正: URL解析部分を独立した関数に分離

**6. 型安全性の欠如**

- ファイル: `main.ts`
- 行: 149 `const slashNum = url.match(/\//g)?.length`
- 問題: `slashNum` が `undefined` の可能性を考慮していない
- 修正: 適切なnullチェックまたはデフォルト値設定

**7. 意味不明コメント**

- ファイル: `main.ts`
- 行: 64 `// for!for!`
- 問題: コメントの意味が不明
- 修正: 削除または適切なコメントに変更

### 📦 アーキテクチャ改善（低優先度）

**8. 単一ファイル肥大化**

- 問題: 189行の単一ファイルに責務が混在
- 修正: CLI解析、Git操作、ファイル操作を別ファイルに分離

**9. ハードコード依存**

- 問題: GitHub/GitLab以外のサービス拡張が困難
- 修正: 設定ファイルまたはプラグイン方式での拡張性向上

## 推奨作業順序

1. 不適切なプロセス終了修正（影響範囲が広い）
2. 型安全性改善（バグ防止）
3. TODO実装（コード品質）
4. コメント修正（可読性）
5. アーキテクチャ改善（将来の拡張性）

## 関連ファイル

- メインコード: `main.ts`
- テスト: `test.ts`
- 設定: `deno.json`
- ドキュメント: `README.md`, `CLAUDE.md`

最終更新: 2025-06-22
